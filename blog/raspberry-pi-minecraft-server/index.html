<!doctype html> <html> <head> <meta charset=utf-8> <meta http-equiv=X-UA-Compatible content='IE=edge;chrome=1'/> <meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta name=description content="The personal website of Jack MapelLentz, est. 2018."/> <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script> <link href="/stylesheets/site.css" rel=stylesheet /> <script src="/javascripts/site.js"></script> <script src="/javascripts/menu.js"></script> <link rel=icon type='image/x-icon' href='./../favicon.ico'/> <link rel=apple-touch-icon href="./../images/iphoneicon"> <meta name=supported-color-schemes content="light dark"> <meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"> <meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"> <meta name=HandheldFriendly content=true> <link href="/stylesheets/articles-bw.css" rel=stylesheet /> <title>A complete guide to making a Minecraft server on a Raspberry Pi ‚Ä¢ Blog ‚Ä¢ Jack MapelLentz</title> <link rel=alternate type="application/atom+xml" title="Jack's Blog" href="/blog/feed.xml"/> <script src="/javascripts/blog.js"></script> </head> <body> <header> <div class=banner id=banner> <div class=title id=banner> <h1> <a id=banner href="../../../../../">jack mapellentz</a> </h1> </div> <div id=navigation id=banner class=navigation> <h1> <a href="javascript:showMenu()" id=menuButton id=banner>menu</a> </h1> </div> <div id=sidenavWrapper class=sidenavWrapper> <div id=sidenav> <h1 id=sidenav-h1> <div class=default-menu-items> <a href="javascript:void(0)"onclick="hideMenu()">close</a> <a href="./../../../">home</a> <a href="./../../../blog">blog</a> <a href="./../../../literature">literary things</a> <a href="javascript:toggleProfiles()" class=exclude>profiles</a> </div> <div class=menu-profiles style="display: none;"> <a href="javascript:toggleProfiles()">close</a> <a href="javascript:toggleProfilesInstagram()">instagram</a> <a href="https://en.wikipedia.org/wiki/User:Jltml" target=blank>wikipedia</a> <a href="https://github.com/jltml/" target=blank>github</a> <a href="https://www.linkedin.com/in/jltml/" target=blank>linkedin</a> <a href="https://music.apple.com/profile/jltml" target=_blank>apple music</a> <a href="https://open.spotify.com/user/jltml" target=_blank>spotify</a> <a href="https://youtube.com/@jltml" target=_blank>youtube</a> </div> <div class=menu-profiles-instagram style="display: none;"> <a href="javascript:toggleProfilesInstagram()">close</a> <a href="https://www.instagram.com/jackmapellentz/" target=blank>main</a> <a href="https://www.instagram.com/photos.by.jack/" target=blank>photography</a> </div> <div class=default-menu-items> <a href="./../../../misc">miscellaneous</a> </div> <br> </h1> <i> <a href="https://github.com/jltml/jltml.github.io/" target=blank> <span id=lastModified></span></a> </i> </div> </div> <div class=bottomEdge></div> </div> <div id=sidenavEdge></div> <script src="/javascripts/menu.js"></script> </header> <div id=main role=main> <div id=blog-header> <h1><a href="/blog">blog</a></h1> <span class=blog-article-link-etc> <span class=blog-article-link-date> <a href="/blog/2021">Mar 17, 2021</a> </span> <a href="/blog/tags/projects/" class=blog-article-link-tag>projects</a> </span> </div> <hr class=blog-header-hr> <h1>A complete guide to making a Minecraft server on a Raspberry Pi</h1> <p><em>2023 update: this is for the Java Edition of Minecraft, but you can now run Bedrock servers like this too! See <a href="https://github.com/itzg/docker-minecraft-bedrock-server">this repository</a> ‚Äî¬†it functions much the same way as the below.</em></p> <p>My first tutorial! How exciting. I kind of doubt that anyone will read this. Nonetheless, it would&rsquo;ve been helpful to have, so here I go:</p> <h2>What you&rsquo;ll need</h2> <ul> <li>a Raspberry Pi 4 (4GB+ of RAM, probably) <ul> <li>Power supply</li> <li>MicroSD card</li> </ul></li> <li>an Ethernet connection (preferably)</li> <li>a case, if you‚Äôd like one</li> <li>I think that‚Äôs it‚Ä¶?</li> </ul> <p>I used a Raspberry Pi 4 with 8GB of RAM to be safe ‚Äî but when running <code>htop</code> I haven‚Äôt ever seen usage go above 2GB, even when I‚Äôm connected and playing on the server. I have yet to stress-test it, or even really <em>use</em> it, though, so it‚Äôs better to be safe and get more RAM. But I suspect that 4GB is just fine (2GB might be a little iffy, but if that‚Äôs all you have and don‚Äôt plan on hosting too many people, go for it).</p> <p>Also, an Ethernet connection is almost definitely a good idea ‚Äî that‚Äôs probably something you won‚Äôt want to skimp on. I don‚Äôt know, maybe if you have some super-fast connection and you‚Äôve got awesome WiFi with no interference, that might be fine, but I‚Äôm definitely sticking with a wired connection given our paltry upload speeds (and for ping purposes, too).</p> <p>As for the MicroSD card: I had no idea what I‚Äôd need, so I totally overshot and <a href="https://www.target.com/p/sandisk-microsdxc-card-128gb-for-nintendo-switch/-/A-78140794">got one that‚Äôs 128GB</a>. It‚Äôs been great, but I‚Äôve also since realized that because of the way the Pi‚Äôs filesystem works, bootable backups will be massive (unless I‚Äôm missing something, which I probably am?). I‚Äôve used, like, nothing of that storage, so you definitely don‚Äôt need one so huge. Even 16GB would probably be barely-utilized. I‚Äôm not sure about the necessity of fast read-and-write speeds, so I defaulted to getting a relatively fast one ‚Äî for example, <a href="https://www.microcenter.com/product/485234/micro-center-64gb-microsdxc-class-10--uhs-1-flash-memory-card">Micro Center‚Äôs MicroSD cards</a> are ridiculously cheap but also (on paper, at least) very slow, so I avoided them. They could definitely work ‚Äî¬†I just have no idea.</p> <h2>Getting started</h2> <p>Ok, so first you‚Äôll have to flash the Pi‚Äôs software. And right off the bat we have a lesson I learned: use a 64-bit OS! I was <a href="https://github.com/itzg/docker-minecraft-server/issues/508#issuecomment-797082423">very confused</a> as to why I couldn‚Äôt set my server to use more than 2GB of RAM without it failing, but turns out there‚Äôs a <a href="https://en.wikipedia.org/wiki/2_GB_limit">whole Wikipedia page about it</a>. I used the <a href="https://www.raspberrypi.org/forums/viewtopic.php?t=275370">beta 64-bit Raspberry Pi OS</a>, which you can <a href="https://downloads.raspberrypi.org/raspios_arm64/images/raspios_arm64-2020-08-24/2020-08-20-raspios-buster-arm64.zip">download by clicking here</a> (download will start immediately). Also, you‚Äôll need the Raspberry Pi Imager app: <a href="https://www.raspberrypi.org/software/">download a copy here</a>, or if you use Homebrew, install it with <code>brew install --cask raspberry-pi-imager</code>. Once the OS is downloaded, you <em>don‚Äôt have to unzip it</em> ‚Äî just launch the RPi Imager and click ‚Äúchoose OS‚Äù and scroll down to select ‚Äúcustom OS.‚Äù Select the <code>.zip</code> file, select your MicroSD card (insert it if you haven‚Äôt already), and then write the image.</p> <p>When all of that is done, the application will automatically eject the MicroSD card. Just remove it and plug it back in to remount it ‚Äî we‚Äôll need to edit something. Because the Pi 4 has MicroHDMI ports, and I couldn‚Äôt find the adapter to normal HDMI, I had to figure out a different way to enable SSH <a href="it‚Äôs%20turned%20off%20by%20default">footnote: for those of you who don‚Äôt know, <code>ssh</code> is a way to remotely connect to another computer ‚Äî it stands for ‚Äúsecure shell.‚Äù</a>‚Ä¶ turns out it‚Äôs quite simple. All you have to do is create an empty file called <code>ssh</code> on the MicroSD card ‚Äî to do this, launch Terminal (I‚Äôm on a Mac‚Ä¶ sorry Windows people; I have like no idea how your stuff works‚Ä¶) and type <code>cd</code> ‚Äî that‚Äôs cd with a space after it. Then, just drag your MicroSD card‚Äôs icon from your Desktop onto the Terminal window ‚Äî it‚Äôll fill in the path. You should have something like this:</p> <div class=highlight><pre class="highlight shell"><code><span class="nb">cd </span>Volumes/path/to/your/drive
</code></pre></div> <p>in which the <code>/path/to/your/drive</code> part will obviously be different. Then hit return, and you should be in the MicroSD card‚Äôs directory. Now, the command to create the empty file called <code>ssh</code>:</p> <div class=highlight><pre class="highlight shell"><code><span class="nb">touch </span>ssh
</code></pre></div> <p>You should be all good to go now! Eject the MicroSD card, put it in the Pi, connect your Ethernet, and plug in the power supply! SSH should be automatically enabled.</p> <p>Ok, but now we have to actually connect. That‚Äôs also pretty straightforward! I used <a href="https://www.fing.com">Fing</a> to find my Pi‚Äôs IP address ‚Äî using the desktop app is likely easiest, since the iPhone app can no longer identify devices by MAC address as well. Find the Raspberry Pi, click on it, and get its IP address. Then, SSH into it:</p> <div class=highlight><pre class="highlight shell"><code>ssh pi@192.168.0.x
</code></pre></div> <p>in which <code>x</code> will be replaced by your Pi‚Äôs specific number. Some routers use different numbering schemes, but I think most are <code>192.168</code> etc. The <code>pi</code> refers to the username, which is by default pi.</p> <p>If you‚Äôve got the IP address right, it will ask you for a password ‚Äî the default is <code>raspberry</code>. Once you‚Äôre in, you‚Äôll want to change that right away (it will tell you how onscreen). After you‚Äôve done that, you can adjust other localisation settings by running</p> <div class=highlight><pre class="highlight shell"><code><span class="nb">sudo </span>raspi-config
</code></pre></div> <h2>Docker things</h2> <p>Alright, so you‚Äôre all logged in and everything now! Congrats. Time for the actual server stuff: we‚Äôll be using the absolutely awesome <a href="https://github.com/itzg/docker-minecraft-server">docker-minecraft-server by itzg</a>. Docker is a platform for creating containerized apps/environments/stuff, so you can do multiple things on one computer without worrying about one thing messing the other things up. Clearly I‚Äôm not super proficient with it. <a href="https://en.wikipedia.org/wiki/Docker_(software)">But here, you can read more.</a> Anyway, we‚Äôll need to install Docker to start. Run these two commands:</p> <div class=highlight><pre class="highlight shell"><code>curl <span class="nt">-fsSL</span> https://get.docker.com <span class="nt">-o</span> get-docker.sh
<span class="nb">sudo </span>sh get-docker.sh
</code></pre></div> <p>and Docker will install! Then add yourself to the user group so you don‚Äôt have to run everything with <code>sudo</code>, then restart the Pi to make that go into effect:</p> <div class=highlight><pre class="highlight shell"><code><span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker pi
<span class="nb">sudo </span>reboot
</code></pre></div> <p>You‚Äôll have to wait a minute, then <code>ssh</code> again, like before (<code>ssh pi@[your IP]</code>). Next, we need to install <code>docker-compose</code>, which makes it much easier to restart your server and stuff ‚Äî instead of having to type in all your configuration every time you start it, <code>docker-compose</code> will use a <a href="https://github.com/itzg/docker-minecraft-server/blob/master/examples/docker-compose-autopause.yml">YAML</a> file, which is so much easier to read and just generally way better. More commands (I used <a href="https://sanderh.dev/setup-Docker-and-Docker-Compose-on-Raspberry-Pi/">this guide</a>):</p> <div class=highlight><pre class="highlight shell"><code><span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> libffi-dev libssl-dev
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> python3 python3-pip
<span class="nb">sudo </span>apt-get remove python-configparser
<span class="nb">sudo </span>pip3 <span class="nt">-v</span> <span class="nb">install </span>docker-compose
</code></pre></div> <h2>Server time</h2> <p>Ah, finally, time for the actual server. Ok, so to begin, let‚Äôs make a directory (folder) for our server, so we can keep everything in one place:</p> <div class=highlight><pre class="highlight shell"><code><span class="nb">mkdir </span>minecraft-server
<span class="nb">cd </span>minecraft-server
</code></pre></div> <p><code>mkdir</code> is ‚Äúmake directory,‚Äù and <code>cd</code> is ‚Äúchange directory.‚Äù Next, make (and edit) a file called <code>docker-compose.yml</code> ‚Äî that‚Äôs the one with all the configuration stuff:</p> <div class=highlight><pre class="highlight shell"><code>nano docker-compose.yml
</code></pre></div> <p>You‚Äôll now be in <code>nano</code>, a command-line text editor. You can copy and paste the following into <code>nano</code>:</p> <div class=highlight><pre class="highlight yaml"><code><span class="na">minecraft-server</span><span class="pi">:</span>
  <span class="na">image</span><span class="pi">:</span> <span class="s">itzg/minecraft-server:multiarch-latest</span>

  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s2">"</span><span class="s">25565:25565"</span> <span class="c1"># Probably don't change this</span>

  <span class="na">environment</span><span class="pi">:</span>
    <span class="na">EULA</span><span class="pi">:</span> <span class="s2">"</span><span class="s">TRUE"</span> <span class="c1"># Agrees to Mojang EULA (necessary to start server)</span>
    <span class="na">INIT_MEMORY</span><span class="pi">:</span> <span class="s2">"</span><span class="s">1G"</span> <span class="c1"># Initial memory</span>
    <span class="na">MAX_MEMORY</span><span class="pi">:</span> <span class="s2">"</span><span class="s">6G"</span> <span class="c1"># Set this to a little less than your RAM</span>
    <span class="na">DEBUG_MEMORY</span><span class="pi">:</span> <span class="s2">"</span><span class="s">TRUE"</span> <span class="c1"># Shows extra memory stats in logs</span>
    <span class="na">OVERRIDE_SERVER_PROPERTIES</span><span class="pi">:</span> <span class="s2">"</span><span class="s">TRUE"</span>
    <span class="na">MAX_TICK_TIME</span><span class="pi">:</span> <span class="s2">"</span><span class="s">-1"</span> <span class="c1"># Disables the watchdog server restarter</span>
    <span class="na">ENABLE_AUTOPAUSE</span><span class="pi">:</span> <span class="s2">"</span><span class="s">TRUE"</span> <span class="c1"># Pauses server process when no one's on</span>
    <span class="na">SERVER_NAME</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Raspberry</span><span class="nv"> </span><span class="s">Pi</span><span class="nv"> </span><span class="s">Server"</span> <span class="c1"># Self-explanatory</span>
    <span class="na">OPS</span><span class="pi">:</span> <span class="s2">"</span><span class="s">player1,player2"</span> <span class="c1"># Administrators by username</span>
    <span class="na">MAX_PLAYERS</span><span class="pi">:</span> <span class="s2">"</span><span class="s">5"</span> <span class="c1"># Self-explanatory</span>
    <span class="na">MOTD</span><span class="pi">:</span> <span class="s2">"</span><span class="s">Message</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">day</span><span class="nv"> </span><span class="s">(subtitle)</span><span class="nv"> </span><span class="s">goes</span><span class="nv"> </span><span class="s">here"</span> <span class="c1"># Set this</span>
    <span class="na">WHITELIST</span><span class="pi">:</span> <span class="s2">"</span><span class="s">player1,player2,etc"</span> <span class="c1"># Whitelist players here</span>
    <span class="na">SPAWN_PROTECTION</span><span class="pi">:</span> <span class="s2">"</span><span class="s">0"</span> <span class="c1"># radius in chunks around spawn to protect from non-OPs</span>
    <span class="na">OVERRIDE_SERVER_PROPERTIES</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
    <span class="na">OVERRIDE_WHITELIST</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
    <span class="na">OVERRIDE_OPS</span><span class="pi">:</span> <span class="s2">"</span><span class="s">true"</span>
    <span class="c1"># The above 3 set it to override old parameters upon restart</span>

  <span class="na">volumes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">./data:/data</span> <span class="c1"># This stores your world between restarts</span>

  <span class="na">tty</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">stdin_open</span><span class="pi">:</span> <span class="no">true</span>
  <span class="na">restart</span><span class="pi">:</span> <span class="s">always</span>
  <span class="na">container_name</span><span class="pi">:</span> <span class="s">mc</span> <span class="c1"># You can change this if you'd like</span>
  <span class="na">privileged</span><span class="pi">:</span> <span class="no">true</span>
</code></pre></div> <p>Go ahead and change the parameters to suit your own preferences/needs. When you‚Äôre all done, do control-X to exit, then follow the onscreen instructions to save (type <code>y</code> then hit <code>enter</code> to save as <code>docker-compose.yml</code>). Now‚Ä¶ time to start the server!</p> <div class=highlight><pre class="highlight shell"><code>docker-compose up <span class="nt">-d</span>
</code></pre></div> <p>The <code>-d</code> part is for <code>--detached</code>, which lets it run in the background. But to view the logs, which is probably a good idea, do</p> <div class=highlight><pre class="highlight shell"><code>docker logs mc <span class="nt">-f</span>
</code></pre></div> <p><code>mc</code> is the name we gave the Docker container, and <code>-f</code> tells it to follow the logs as they keep coming. Once everything‚Äôs downloaded and up and running, you can open up Minecraft on your computer, add a new server, type in your Pi‚Äôs IP address, and you should be able to log in (as long as you‚Äôve whitelisted yourself, if you left the whitelist enabled)! Super exciting.</p> <h2>Connecting over the Internet</h2> <p>So far, you‚Äôre able to connect over your local network. But that‚Äôs probably not why you‚Äôre making this ‚Äî you‚Äôd like to play with people over the whole Internet, otherwise there isn‚Äôt much of a point to doing this over just using your computer. There are a few steps to opening the server to the internet ‚Äî¬†first, sign up for an account at <a href="https://www.duckdns.org">DuckDNS</a>. They‚Äôre a free <em>dynamic IP</em> service ‚Äî so basically, unless you‚Äôre a business and you pay your ISP for a static IP address, your outward-facing IP will change from time to time, which would break the server address your friends typed in. You‚Äôd have to constantly check your public IP and tell them to type it in. DuckDNS automates that ‚Äî you put a script on your Pi that runs every 5 minutes or so and tells them your IP address, and then their website points a subdomain (that you choose) to your IP. Add a subdomain with a name you like, and then <a href="https://www.duckdns.org/install.jsp">follow their installation instructions back on your Pi</a> (in the Terminal window). Make sure you select ‚Äúpi‚Äù as the operating system, and you can use <code>nano</code> instead of <code>vi</code> ‚Äî¬†it‚Äôs a little less complicated and easier to understand. Come back here when you‚Äôre done.</p> <p>Ok, you‚Äôre back? Good job. Now all we have to do is port forwarding. Log into your router‚Äôs GUI (probably 192.168.0.1), and find the section about port forwarding (for us it‚Äôs under ‚Äúadvanced setup‚Äù). Do what it asks for ‚Äî routers are weird and all very different, but for us, that meant entering the IP address of the Pi, leaving the LAN starting port blank, selecting TCP (only) as the protocol, and setting 25565 to be the only WAN port (I also left ‚Äúsource IP state‚Äù as ‚Äúall IP addresses‚Äù). Port 25565 is the default port for Minecraft servers. If you‚Äôd like to be able to <code>ssh</code> from somewhere else, you can also open port 22, which is (you guessed it) the default SSH one. (If you do, just make sure that your password is really strong, and <em>definitely</em> don‚Äôt leave the password as the default <code>raspberry</code>!!)</p> <h2>Joining the world</h2> <p>So presumably you‚Äôve made it ‚Äî congrats(!)</p> <p>To join the world on your local network, you‚Äôll need to use the Pi‚Äôs local IP address as your server address. To play elsewhere, use the DuckDNS domain. (If you have a VPN on, you can connect using the DuckDNS domain even on your local network, but just do the local IP address because it provides lower (better) ping.) Basically, just add both, and one will be disconnected depending on whether you‚Äôre at home or elsewhere. You can just give other people the DuckDNS domain, though, unless they‚Äôre at your place. Also ‚Äî if you‚Äôre finicky like me and would rather use a subdomain of a domain that you own, you can just add a CNAME record that points to <code>you.duckdns.org</code> (replacing <code>you</code>, of course). If you have no idea what that means, don‚Äôt worry at all.</p> <h2>üéâ You did it!</h2> <p>Congratulations! (If you ran into issues, feel free to leave a comment and I‚Äôll do my best to help.)</p> <p>This is where I would say ‚Äòhappy crafting‚Äô or something, but that‚Äôs exceedingly cringy, so nope‚Ä¶ just congratulations.</p> <div id=bottomThings> <a href="/blog" class=js-back style="text-decoration: none;">‚Üê</a> <span style="float: right;"> <div id=commentoButton> <a href="javascript:togglecommento();" style="text-decoration: none;">comments ‚Üì</a> </div> </span> </div> <div class=commentoOuterWrapper style="display: none;"> <div class=commentoInnerWrapper> <div class=commento-notice> <p> <b>Comments no longer work :(</b> Unfortunately, Heroku got rid of their free tier, so this no longer works. <a style="font-weight: 100;" class=commento-notice-learn-more-link>Click here to read the disclaimer I had here before / if you'd like to know a bit about how I made it work.</a> <span style="display: none;" class=commento-notice-learn-more>¬∂ <i>Once upon a time‚Ä¶</i> To be specific:¬†I didn't want to pay to host them, so I installed Commento on Heroku and set up Cloudflare to get SSL to work (Heroku charges for SSL certificates). However, while the connection between your computer and Cloudflare is secure, the connection between Cloudflare and Heroku isn't. Theoretically I think someone could sneak something into the URL, or something. Again, I'm a random person who has like 4 friends, so none of this should ever be an issue. Clicking the button below will load the external Commento script.</span> </p> <h1 class=commento-load> <a>try loading anywaay</a> </h1> </div> <div id=commento></div> </div> <script>
          $("a.commento-notice-learn-more-link").click(function(){
            $(".commento-notice-learn-more").show();
            $(".commento-notice-learn-more-link").hide();
          });
          $("h1.commento-load").click(function(){
            $.getScript("https://jltml-commento.herokuapp.com/js/commento.js");
            $(".commento-notice").slideUp("slow");
            $("#commento").slideDown("slow");
          });

          function togglecommento() {
            $(".commentoOuterWrapper").slideToggle("slow");
            $("#commentoButton").toggleClass("buttonFlip");
          }
        </script> </div> </div> </body> </html>